<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Countdown Timer with Weather Forecast</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            background-image: url('https://img.goodfon.com/original/1920x1200/b/38/gornye-lyzhi-lyzhnik-sneg-gory.jpg');
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
        }
        .container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 80%;
            max-width: 600px;
        }
        .box {
            background: rgba(0, 0, 0, 0.7);
            padding: 20px 30px;
            margin-bottom: 20px;
            border-radius: 10px;
            font-family: Arial, sans-serif;
            width: 100%;
            text-align: center;
        }
        .title {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        .countdown-text {
            font-size: 2em;
            margin-bottom: 20px;
        }
        .compact-info p {
            margin: 3px 0;
            font-size: 1.2em; /* Consistent text size */
        }
        .emoji {
            font-size: 1.5em;
        }
        .weather-item {
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        .weather-icon {
            font-size: 1.5em;
        }
        .links-box {
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            margin-top: 20px;
            width: 100%;
            text-align: center;
            border-radius: 10px;
        }
        .links-box a {
            color: #00c3ff;
            text-decoration: none;
            font-size: 1.1em;
            margin: 10px;
        }
        .links-box a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- Countdown Timer Box -->
        <div class="box">
            <div class="title">Vinnufer√∞ hefst eftir:</div>
            <div class="countdown-text" id="countdown"></div>
        </div>

        <!-- Accommodation Info Box -->
        <div class="box">
            <div class="title">Gist hj√° fj√∂lskyldunni √≠ Les Houches</div>
            <div class="compact-info">
                <p><span class="emoji">üè†</span> Deluxe herbergi</p>
                <p><span class="emoji">üöê</span> Free airport shuttle</p>
                <p><span class="emoji">üõÅ</span> One hot shower per person</p>
                <p><span class="emoji"‚ô®Ô∏è</span> Unlimited ski sauna</p>
                <p><span class="emoji">üéø</span> Assistance with ski pass & rentals</p>
            </div>
        </div>

        <!-- Weather Forecast Box -->
        <div class="box">
            <div class="title">Ve√∞ursp√° Chamonix n√¶stu daga</div>
            <div id="weather"></div>
        </div>

        <!-- Useful Links Box -->
        <div class="links-box">
            <div class="title">G√≥√∞ar uppl√Ωsingar</div>
            <div>
                <a href="https://www.annapurna2grill.com/" target="_blank"><span class="emoji">üçΩÔ∏è</span> Annapurna Restaurant</a>
                <a href="https://www.montblancnaturalresort.com/en/ticketing" target="_blank"><span class="emoji">üé´</span> Sk√≠√∞apassar</a>
                <a href="https://en.chamonix.com/weather" target="_blank"><span class="emoji">üå§Ô∏è</span> Ve√∞ur</a>
            </div>
        </div>
    </div>

    <script>
        // Countdown Timer Code
        const countdownDate = new Date("February 8, 2025 00:00:00").getTime();
        const countdownElement = document.getElementById("countdown");

        const interval = setInterval(() => {
            const now = new Date().getTime();
            const distance = countdownDate - now;

            if (distance <= 0) {
                clearInterval(interval);
                countdownElement.innerHTML = "Vinnufer√∞ hefst!";
            } else {
                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                countdownElement.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
            }
        }, 1000);

        // Fetch Weather Data and Display
        async function fetchWeather() {
            try {
                const response = await fetch('https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=45.9237&lon=6.8694', {
                    headers: {
                        'User-Agent': 'your-app-name'  // Replace 'your-app-name' with the app name you registered.
                    }
                });
                const data = await response.json();

                const weatherElement = document.getElementById('weather');
                weatherElement.innerHTML = '';
                const forecast = data.properties.timeseries;

                for (let i = 0; i < 7; i++) {
                    const day = new Date(forecast[i].time);
                    const dayOfWeek = day.toLocaleString('en-us', { weekday: 'short' });
                    const date = day.toLocaleString('en-us', { day: 'numeric', month: 'short' });

                    const temperature = forecast[i].data.instant.details.air_temperature;
                    const icon = forecast[i].data.next_12_hours.summary.symbol_code; // Getting weather icon symbol
                    let emoji;

                    // Determine emoji based on weather symbol
                    if (icon.includes("clear")) emoji = "‚òÄÔ∏è";
                    else if (icon.includes("cloud")) emoji = "‚òÅÔ∏è";
                    else if (icon.includes("rain")) emoji = "üåßÔ∏è";
                    else if (icon.includes("snow")) emoji = "‚ùÑÔ∏è";
                    else emoji = "üå§Ô∏è"; // Default

                    weatherElement.innerHTML += `
                        <div class="weather-item">
                            <strong>${dayOfWeek} ${date}</strong> - ${temperature}¬∞C ${emoji}
                        </div>
                    `;
                }
            } catch (error) {
                console.error('Error fetching weather data:', error);
                document.getElementById('weather').innerHTML = "Unable to retrieve weather data.";
            }
        }

        fetchWeather(); // Call the fetchWeather function to display weather data
    </script>

</body>
</html>
